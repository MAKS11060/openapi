{"version":3,"file":"apidom.worker.js","mappings":"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","sources":["../webpack/bootstrap","../webpack/runtime/define property getters","../webpack/runtime/hasOwnProperty shorthand","../external module \"monaco-editor/esm/vs/editor/editor.worker.js\"","../external module \"deep-extend\"","../external module \"vscode-languageserver-textdocument\"","../external module \"@swagger-api/apidom-ls\"","plugins/editor-monaco-language-apidom/language/ApiDOMWorker.js","plugins/editor-monaco-language-apidom/language/apidom.worker.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var x = y => { var x = {}; __webpack_require__.d(x, y); return x; }\nvar y = x => () => x\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"initialize\"]: () => __WEBPACK_EXTERNAL_MODULE_monaco_editor_esm_vs_editor_editor_worker_js_87e2e091__.initialize });","var x = y => { var x = {}; __webpack_require__.d(x, y); return x; }\nvar y = x => () => x\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"default\"]: () => __WEBPACK_EXTERNAL_MODULE_deep_extend_c3647569__[\"default\"] });","var x = y => { var x = {}; __webpack_require__.d(x, y); return x; }\nvar y = x => () => x\nconst __WEBPACK_NAMESPACE_OBJECT__ = __WEBPACK_EXTERNAL_MODULE_vscode_languageserver_textdocument_4dc2f5d8__;","var x = y => { var x = {}; __webpack_require__.d(x, y); return x; }\nvar y = x => () => x\nconst __WEBPACK_NAMESPACE_OBJECT__ = __WEBPACK_EXTERNAL_MODULE__swagger_api_apidom_ls_1047a2a9__;","/* eslint-disable no-underscore-dangle */\nimport deepExtend from 'deep-extend';\nimport * as vscodeLanguageServerTextDocument from 'vscode-languageserver-textdocument';\nimport * as apidomLS from '@swagger-api/apidom-ls';\n\nexport class ApiDOMWorker {\n  static defaultApiDOMContext = {\n    validatorProviders: [],\n    completionProviders: [],\n    performanceLogs: false,\n    logLevel: apidomLS.LogLevel.WARN,\n    defaultLanguageContent: {\n      namespace: 'asyncapi',\n    },\n    completionContext: {\n      maxNumberOfItems: 100,\n      enableLSPFilter: false, // enables \"strict\" word filtering (instead of default Monaco fuzzy matching; https://github.com/swagger-api/apidom/pull/2954)\n    },\n    validationContext: {\n      referenceValidationMode: apidomLS.ReferenceValidationMode.APIDOM_INDIRECT_EXTERNAL,\n    },\n  };\n\n  constructor(ctx, createData) {\n    this._ctx = ctx;\n    this._createData = createData;\n    this._languageService = this.createLanguageService();\n  }\n\n  createLanguageService() {\n    return apidomLS.getLanguageService(\n      deepExtend({}, this.constructor.defaultApiDOMContext, this._createData.apiDOMContext)\n    );\n  }\n\n  async doValidation(uri) {\n    const document = this._getTextDocument(uri);\n    if (!document) {\n      return [];\n    }\n    return this._languageService.doValidation(document);\n  }\n\n  async doComplete(uri, position) {\n    const document = this._getTextDocument(uri);\n    if (!document) {\n      return [];\n    }\n    return this._languageService.doCompletion(document, position);\n  }\n\n  async doHover(uri, position) {\n    const document = this._getTextDocument(uri);\n    if (!document) {\n      return [];\n    }\n    return this._languageService.doHover(document, position);\n  }\n\n  async doLinks(uri) {\n    const document = this._getTextDocument(uri);\n    if (!document) {\n      return [];\n    }\n    return this._languageService.doLinks(document);\n  }\n\n  async findDocumentSymbols(uri) {\n    const document = this._getTextDocument(uri);\n    if (!document) {\n      return [];\n    }\n    return this._languageService.doFindDocumentSymbols(document);\n  }\n\n  async provideDefinition(uri, position) {\n    const document = this._getTextDocument(uri);\n    if (!document) {\n      return [];\n    }\n    return this._languageService.doProvideDefinition(document, {\n      uri,\n      position,\n    });\n  }\n\n  async doCodeActions(uri, diagnostics) {\n    const document = this._getTextDocument(uri);\n    if (!document) {\n      return [];\n    }\n    return this._languageService.doCodeActions(document, diagnostics);\n  }\n\n  async findSemanticTokens(uri) {\n    const document = this._getTextDocument(uri);\n    if (!document) {\n      return [];\n    }\n    return this._languageService.computeSemanticTokens(document);\n  }\n\n  async getSemanticTokensLegend() {\n    return this._languageService.getSemanticTokensLegend();\n  }\n\n  async doDeref(uri, dereferenceContext = {}) {\n    const document = this._getTextDocument(uri);\n    if (!document) {\n      return [];\n    }\n\n    return this._languageService.doDeref(document, dereferenceContext);\n  }\n\n  async getJsonPointerPosition(uri, jsonPointer) {\n    const document = this._getTextDocument(uri);\n    if (!document) {\n      return [];\n    }\n\n    return this._languageService.getJsonPointerPosition(document, jsonPointer);\n  }\n\n  _getTextDocument(uri) {\n    const model = this._ctx.getMirrorModels().find((mm) => mm.uri.toString() === uri);\n\n    if (!model) return null;\n\n    return vscodeLanguageServerTextDocument.TextDocument.create(\n      uri,\n      this._createData.languageId,\n      model.version,\n      model.getValue()\n    );\n  }\n}\n\nexport const makeCreate = (BaseClass) => (ctx, createData) => {\n  let ApiDOMWorkerClass = BaseClass;\n\n  if (createData.customWorkerPath) {\n    if (typeof globalThis.importScripts === 'undefined') {\n      // eslint-disable-next-line no-console\n      console.warn(\n        'Monaco is not using webworkers for background tasks, and that is needed to support the customWorkerPath flag'\n      );\n    } else {\n      if (Array.isArray(createData.customWorkerPath)) {\n        globalThis.importScripts(...createData.customWorkerPath);\n      } else {\n        globalThis.importScripts(createData.customWorkerPath);\n      }\n\n      const { customApiDOMWorkerFactory: workerFactoryFunc } = globalThis;\n      if (typeof workerFactoryFunc !== 'function') {\n        throw new Error(\n          `The script at ${createData.customWorkerPath} does not add customApiDOMWorkerFactory to globalThis`\n        );\n      }\n\n      ApiDOMWorkerClass = workerFactoryFunc(ApiDOMWorkerClass, {\n        apidomLS,\n        vscodeLanguageServerTextDocument,\n        deepExtend,\n      });\n    }\n  }\n\n  return new ApiDOMWorkerClass(ctx, createData);\n};\n","import { initialize } from 'monaco-editor/esm/vs/editor/editor.worker.js';\n\nimport { makeCreate, ApiDOMWorker } from './ApiDOMWorker.js';\n\nconst create = makeCreate(ApiDOMWorker);\n\nglobalThis.onmessage = () => {\n  initialize((ctx, createData) => {\n    return create(ctx, createData);\n  });\n};\n\nexport { initialize, create, makeCreate, ApiDOMWorker };\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","y","x","d","__WEBPACK_EXTERNAL_MODULE_monaco_editor_esm_vs_editor_editor_worker_js_87e2e091__","initialize","__WEBPACK_EXTERNAL_MODULE_deep_extend_c3647569__","__WEBPACK_EXTERNAL_MODULE_vscode_languageserver_textdocument_4dc2f5d8__","__WEBPACK_EXTERNAL_MODULE__swagger_api_apidom_ls_1047a2a9__","ApiDOMWorker","constructor","ctx","createData","this","_ctx","_createData","_languageService","createLanguageService","apidomLS","deepExtend","defaultApiDOMContext","apiDOMContext","doValidation","uri","document","_getTextDocument","doComplete","position","doCompletion","doHover","doLinks","findDocumentSymbols","doFindDocumentSymbols","provideDefinition","doProvideDefinition","doCodeActions","diagnostics","findSemanticTokens","computeSemanticTokens","getSemanticTokensLegend","doDeref","dereferenceContext","getJsonPointerPosition","jsonPointer","model","getMirrorModels","find","mm","toString","vscodeLanguageServerTextDocument","create","languageId","version","getValue","validatorProviders","completionProviders","performanceLogs","logLevel","WARN","defaultLanguageContent","namespace","completionContext","maxNumberOfItems","enableLSPFilter","validationContext","referenceValidationMode","APIDOM_INDIRECT_EXTERNAL","makeCreate","BaseClass","ApiDOMWorkerClass","customWorkerPath","globalThis","importScripts","console","warn","Array","isArray","customApiDOMWorkerFactory","workerFactoryFunc","Error","onmessage"],"sourceRoot":""}