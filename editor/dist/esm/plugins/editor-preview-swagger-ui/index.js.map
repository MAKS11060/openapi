{"version":3,"file":"plugins/editor-preview-swagger-ui/index.js","mappings":"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","sources":["../webpack/bootstrap","../webpack/runtime/define property getters","../webpack/runtime/hasOwnProperty shorthand","../external module \"react\"","../external module \"react/jsx-runtime.js\"","plugins/editor-preview-swagger-ui/components/EditorPreviewSwaggerUI/EditorPreviewSwaggerUI.jsx","../external module \"immutable\"","../external module \"react-immutable-proptypes\"","plugins/editor-preview-swagger-ui/components/JumpToPath.jsx","plugins/editor-preview-swagger-ui/wrap-components/EditorPreviewWrapper.jsx","plugins/editor-preview-swagger-ui/actions/preview-unmounted.js","../external module \"@swagger-api/apidom-json-pointer\"","plugins/editor-preview-swagger-ui/actions/jump-to-path.js","utils/create-safe-action-wrapper.js","plugins/editor-preview-swagger-ui/wrap-actions.js","plugins/editor-preview-swagger-ui/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var x = y => { var x = {}; __webpack_require__.d(x, y); return x; }\nvar y = x => () => x\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"useEffect\"]: () => __WEBPACK_EXTERNAL_MODULE_react__.useEffect });","var x = y => { var x = {}; __webpack_require__.d(x, y); return x; }\nvar y = x => () => x\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"jsx\"]: () => __WEBPACK_EXTERNAL_MODULE_react_jsx_runtime_js_fc12ce1a__.jsx, [\"jsxs\"]: () => __WEBPACK_EXTERNAL_MODULE_react_jsx_runtime_js_fc12ce1a__.jsxs });","import { useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nconst EditorPreviewSwaggerUI = ({ getComponent, editorPreviewSwaggerUIActions }) => {\n  const BaseLayout = getComponent('BaseLayout', true); // accessed from swagger-ui\n\n  useEffect(() => {\n    return () => {\n      editorPreviewSwaggerUIActions.previewUnmounted();\n    };\n  }, [editorPreviewSwaggerUIActions]);\n\n  return (\n    <div className=\"swagger-editor__editor-preview-swagger-ui\">\n      <BaseLayout />\n    </div>\n  );\n};\n\nEditorPreviewSwaggerUI.propTypes = {\n  getComponent: PropTypes.func.isRequired,\n  editorPreviewSwaggerUIActions: PropTypes.shape({\n    previewUnmounted: PropTypes.func.isRequired,\n  }).isRequired,\n};\n\nexport default EditorPreviewSwaggerUI;\n","var x = y => { var x = {}; __webpack_require__.d(x, y); return x; }\nvar y = x => () => x\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"List\"]: () => __WEBPACK_EXTERNAL_MODULE_immutable__.List });","var x = y => { var x = {}; __webpack_require__.d(x, y); return x; }\nvar y = x => () => x\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({  });","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { List } from 'immutable';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\n\nimport JumpIcon from '../assets/jump-icon.svg';\n\nconst JumpToPath = ({ path, content, showButton, editorPreviewSwaggerUIActions }) => {\n  const handleJumpToPath = (e) => {\n    e.stopPropagation();\n    editorPreviewSwaggerUIActions.jumpToPath(path.toJS());\n  };\n\n  const jumpToPathButton = (\n    <div role=\"button\" tabIndex={0} onClick={handleJumpToPath} onKeyDown={handleJumpToPath}>\n      <img\n        src={JumpIcon}\n        className=\"view-line-link\"\n        title=\"Jump to definition\"\n        alt=\"Jump to path\"\n      />\n    </div>\n  );\n\n  if (content) {\n    // if we were given content to render, wrap it\n    return (\n      <span role=\"button\" tabIndex={0} onClick={handleJumpToPath} onKeyDown={handleJumpToPath}>\n        {showButton && jumpToPathButton}\n        {content}\n      </span>\n    );\n  }\n  return <div>{jumpToPathButton}</div>;\n};\n\nJumpToPath.propTypes = {\n  path: ImmutablePropTypes.listOf(PropTypes.string),\n  content: PropTypes.element,\n  showButton: PropTypes.bool,\n  editorPreviewSwaggerUIActions: PropTypes.shape({\n    jumpToPath: PropTypes.func.isRequired,\n  }).isRequired,\n};\n\nJumpToPath.defaultProps = {\n  path: List(),\n  content: null,\n  showButton: false,\n};\n\nexport default JumpToPath;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst EditorPreviewWrapper = (Original, system) => {\n  const EditorPreview = ({ getComponent, editorSelectors }) => {\n    const EditorPreviewSwaggerUI = getComponent('EditorPreviewSwaggerUI', true);\n    const isOpenAPI = editorSelectors.selectIsContentTypeOpenAPI();\n\n    if (isOpenAPI) {\n      return <EditorPreviewSwaggerUI />;\n    }\n\n    return (\n      <Original {...system} /> // eslint-disable-line react/jsx-props-no-spreading\n    );\n  };\n\n  EditorPreview.propTypes = {\n    getComponent: PropTypes.func.isRequired,\n    editorSelectors: PropTypes.shape({\n      selectIsContentTypeOpenAPI: PropTypes.func.isRequired,\n      selectIsContentTypeOpenAPI31x: PropTypes.func.isRequired,\n    }).isRequired,\n  };\n\n  return EditorPreview;\n};\n\nexport default EditorPreviewWrapper;\n","export const EDITOR_PREVIEW_SWAGGER_UI_PREVIEW_UNMOUNTED =\n  'editor_preview_swagger_ui_preview_unmounted';\n\nexport const previewUnmounted = () => ({\n  type: EDITOR_PREVIEW_SWAGGER_UI_PREVIEW_UNMOUNTED,\n});\n","var x = y => { var x = {}; __webpack_require__.d(x, y); return x; }\nvar y = x => () => x\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"compile\"]: () => __WEBPACK_EXTERNAL_MODULE__swagger_api_apidom_json_pointer_c5d352f4__.compile });","import { compile } from '@swagger-api/apidom-json-pointer';\n\nexport const EDITOR_PREVIEW_SWAGGER_UI_JUMP_TO_PATH_STARTED =\n  'editor_preview_swagger_ui_jump_to_path_started';\nexport const EDITOR_PREVIEW_SWAGGER_UI_JUMP_TO_PATH_SUCCESS =\n  'editor_preview_swagger_ui_jump_to_path_success';\nexport const EDITOR_PREVIEW_SWAGGER_UI_JUMP_TO_PATH_FAILURE =\n  'editor_preview_swagger_ui_jump_to_path_failure';\n\nexport const jumpToPathStarted = ({ path }) => ({\n  type: EDITOR_PREVIEW_SWAGGER_UI_JUMP_TO_PATH_STARTED,\n  payload: path,\n});\n\nexport const jumpToPathSuccess = ({ position, path, jsonPointer }) => ({\n  type: EDITOR_PREVIEW_SWAGGER_UI_JUMP_TO_PATH_SUCCESS,\n  payload: position,\n  meta: { jsonPointer, path },\n});\n\nexport const jumpToPathFailure = ({ error, path, jsonPointer }) => ({\n  type: EDITOR_PREVIEW_SWAGGER_UI_JUMP_TO_PATH_FAILURE,\n  error: true,\n  payload: error,\n  meta: { jsonPointer, path },\n});\n\nexport const jumpToPath = (path) => async (system) => {\n  const { editorActions, editorPreviewSwaggerUIActions } = system;\n  let jsonPointer = '';\n\n  editorPreviewSwaggerUIActions.jumpToPathStarted({ path });\n\n  try {\n    jsonPointer = compile(path);\n    const getJsonPointerPositionFSA = await editorActions.getJsonPointerPosition(jsonPointer);\n\n    if (getJsonPointerPositionFSA.error) {\n      throw getJsonPointerPositionFSA;\n    }\n\n    const { payload: position } = getJsonPointerPositionFSA;\n    const setPositionActionFSA = await editorActions.setPosition(position);\n\n    if (setPositionActionFSA.error) {\n      throw setPositionActionFSA;\n    }\n\n    return editorPreviewSwaggerUIActions.jumpToPathSuccess({ path, jsonPointer, position });\n  } catch (error) {\n    return editorPreviewSwaggerUIActions.jumpToPathFailure({ error, path, jsonPointer });\n  }\n};\n","/**\n * Creates action wrapper that avoids double dispatch.\n *\n * @param wrapper\n * @returns {function(*, *): function(...[*]): (*)}\n */\nconst createSafeActionWrapper = (wrapper) => {\n  let lastFSA = null; // Flux Standard Action(FSA): action objects emitted through redux\n\n  return (origAction, system) =>\n    (...args) => {\n      const fsa = origAction(...args);\n\n      if (fsa === lastFSA) {\n        return fsa;\n      }\n\n      wrapper(origAction, system)(...args);\n\n      lastFSA = fsa;\n\n      return fsa;\n    };\n};\n\nexport default createSafeActionWrapper;\n","import createSafeActionWrapper from '../../utils/create-safe-action-wrapper.js';\n\nexport const detectContentTypeSuccess = createSafeActionWrapper(\n  (oriAction, system) =>\n    ({ content }) => {\n      const { specActions, editorSelectors } = system;\n\n      if (editorSelectors.selectIsContentTypeOpenAPI()) {\n        specActions.updateSpec(content, 'swagger-editor');\n      }\n    }\n);\n\nexport const previewUnmounted = createSafeActionWrapper((oriAction, system) => () => {\n  system.specActions.updateSpec('', 'swagger-editor');\n});\n","import EditorPreviewSwaggerUI from './components/EditorPreviewSwaggerUI/EditorPreviewSwaggerUI.jsx';\nimport JumpToPath from './components/JumpToPath.jsx';\nimport EditorPreviewWrapper from './wrap-components/EditorPreviewWrapper.jsx';\nimport { previewUnmounted } from './actions/preview-unmounted.js';\nimport {\n  jumpToPath,\n  jumpToPathStarted,\n  jumpToPathSuccess,\n  jumpToPathFailure,\n} from './actions/jump-to-path.js';\nimport {\n  detectContentTypeSuccess as detectContentTypeSuccessWrap,\n  previewUnmounted as previewUnmountedWrap,\n} from './wrap-actions.js';\n\nconst EditorPreviewSwaggerUIPlugin = () => ({\n  components: {\n    EditorPreviewSwaggerUI,\n    JumpToPath,\n  },\n  wrapComponents: {\n    EditorPreview: EditorPreviewWrapper,\n  },\n  statePlugins: {\n    editor: {\n      wrapActions: {\n        detectContentTypeSuccess: detectContentTypeSuccessWrap,\n      },\n    },\n    editorPreviewSwaggerUI: {\n      actions: {\n        previewUnmounted,\n\n        jumpToPath,\n        jumpToPathStarted,\n        jumpToPathSuccess,\n        jumpToPathFailure,\n      },\n      wrapActions: {\n        previewUnmounted: previewUnmountedWrap,\n      },\n    },\n  },\n});\n\nexport default EditorPreviewSwaggerUIPlugin;\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","y","x","d","__WEBPACK_EXTERNAL_MODULE_react__","useEffect","__WEBPACK_EXTERNAL_MODULE_react_jsx_runtime_js_fc12ce1a__","jsx","jsxs","EditorPreviewSwaggerUI","getComponent","editorPreviewSwaggerUIActions","BaseLayout","previewUnmounted","_jsx","className","children","__WEBPACK_EXTERNAL_MODULE_immutable__","List","JumpToPath","path","content","showButton","handleJumpToPath","e","stopPropagation","jumpToPath","toJS","jumpToPathButton","role","tabIndex","onClick","onKeyDown","src","title","alt","_jsxs","defaultProps","EditorPreviewWrapper","Original","system","EditorPreview","editorSelectors","selectIsContentTypeOpenAPI","type","__WEBPACK_EXTERNAL_MODULE__swagger_api_apidom_json_pointer_c5d352f4__","compile","jumpToPathStarted","payload","jumpToPathSuccess","position","jsonPointer","meta","jumpToPathFailure","error","async","editorActions","getJsonPointerPositionFSA","getJsonPointerPosition","setPositionActionFSA","setPosition","wrapper","lastFSA","origAction","args","fsa","detectContentTypeSuccess","createSafeActionWrapper","oriAction","specActions","updateSpec","EditorPreviewSwaggerUIPlugin","components","wrapComponents","statePlugins","editor","wrapActions","detectContentTypeSuccessWrap","editorPreviewSwaggerUI","actions","previewUnmountedWrap"],"sourceRoot":""}