import*as e from"react/jsx-runtime.js";import*as t from"react";import*as r from"react-resize-detector";import*as o from"lodash/debounce.js";var a={d:(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},n={};a.d(n,{Z:()=>G});const s=(e=>{var t={};return a.d(t,e),t})({jsx:()=>e.jsx,jsxs:()=>e.jsxs}),d=({getComponent:e,useElementResize:t})=>{const r=e("Editor",!0),o=e("EditorPaneBarTop"),a=e("EditorPaneBarRight"),n=e("EditorPaneBarBottom"),d=e("EditorPaneBarLeft"),i=t({eventName:"editorcontainerresize"});return(0,s.jsxs)("div",{className:"swagger-editor__editor-pane",children:[(0,s.jsxs)("div",{className:"swagger-editor__editor-pane-container-col",children:[(0,s.jsx)(o,{}),(0,s.jsxs)("div",{className:"swagger-editor__editor-pane-container-row",children:[(0,s.jsx)(d,{}),(0,s.jsx)("div",{className:"swagger-editor__editor-container",ref:i,children:(0,s.jsx)(r,{})})]}),(0,s.jsx)(n,{})]}),(0,s.jsx)(a,{})]})};const i=(e=>{var t={};return a.d(t,e),t})({useCallback:()=>t.useCallback,useEffect:()=>t.useEffect,useRef:()=>t.useRef,useState:()=>t.useState});const l=(e=>{var t={};return a.d(t,e),t})({useResizeDetector:()=>r.useResizeDetector}),c=e=>t=>{const{editorActions:r}=e(),o=(0,i.useRef)(null);return(0,i.useEffect)((()=>{const{current:e}=o;return r.editorSetup(e,t),()=>{r.editorTearDown(e,t)}}),[]),o},u=({eventName:e})=>{const t=(0,i.useCallback)(((t,r)=>{const o=new globalThis.CustomEvent(e,{detail:{width:t,height:r}});globalThis.dispatchEvent(o)}),[e]),{ref:r}=(0,l.useResizeDetector)({onResize:t,refreshMode:"debounce",refreshRate:0});return r},g=({isReadOnly:e,editorActions:t,editorSelectors:r,useEditorLifecycle:o})=>{const a=r.selectContent(),n=(()=>{const e=Math.floor(1e7*Math.random()),[t]=(0,i.useState)(String(e));return t})(),d=o("textarea"),[l,c]=(0,i.useState)(a),u=(0,i.useCallback)((e=>{e.preventDefault(),c(e.target.value),t.setContentDebounced(e.target.value,"editor")}),[t]);return(0,i.useEffect)((()=>{c(a)}),[a]),(0,s.jsx)("textarea",{id:n,ref:d,readOnly:e,className:"swagger-editor__editor-textarea",name:"content",value:l,onChange:u})};g.defaultProps={isReadOnly:!1};const p=g,m=({renderChildren:e,renderControls:t})=>(0,s.jsxs)("div",{className:"swagger-editor__editor-pane-bar swagger-editor__editor-pane-bar--top",children:[(0,s.jsx)("div",{className:"swagger-editor__toolbar-horizontal",children:t(null)}),e(null)]});m.defaultProps={renderChildren:e=>e,renderControls:e=>e};const h=m,_=({renderChildren:e,renderControls:t})=>(0,s.jsxs)("div",{className:"swagger-editor__editor-pane-bar swagger-editor__editor-pane-bar--right",children:[(0,s.jsx)("div",{className:"swagger-editor__toolbar-vertical",children:t(null)}),e(null)]});_.defaultProps={renderChildren:e=>e,renderControls:e=>e};const f=_,C=({renderChildren:e,renderControls:t})=>(0,s.jsxs)("div",{className:"swagger-editor__editor-pane-bar swagger-editor__editor-pane-bar--bottom",children:[(0,s.jsx)("div",{className:"swagger-editor__toolbar-horizontal",children:t(null)}),e(null)]});C.defaultProps={renderChildren:e=>e,renderControls:e=>e};const x=C,b=({renderChildren:e,renderControls:t})=>(0,s.jsxs)("div",{className:"swagger-editor__editor-pane-bar swagger-editor__editor-pane-bar--left",children:[(0,s.jsx)("div",{className:"swagger-editor__toolbar-vertical",children:t(null)}),e(null)]});b.defaultProps={renderChildren:e=>e,renderControls:e=>e};const v=b,j="editor_setup",w="editor_tear_down",E="editor_set_content",y=(e,t="textarea")=>({type:j,payload:e,meta:["editor",t]}),P=(e,t="textarea")=>({type:w,payload:e,meta:["editor",t]}),N=e=>({type:E,payload:e,meta:{}}),R=()=>({type:"editor_clear_content"}),S="",T=null,B={[E]:(e,t)=>e.set("content",t.payload),[j]:(e,t)=>t.meta.includes("textarea")?e.set("id",t.payload.id):e,[w]:(e,t)=>t.meta.includes("textarea")?e.get("id")!==t.payload.id?e:e.delete("id"):e},z=e=>e.get("content",S),D=e=>e.get("id",T),A=()=>e=>{const t=e.editorSelectors.selectId();return document.getElementById(t)};const O=(e=>{var t={};return a.d(t,e),t})({default:()=>o.default}),k=e=>{let t=null;return(r,o)=>(...a)=>{const n=r(...a);return n===t||(e(r,o)(...a),t=n),n}},I=(0,O.default)(((e,t,r)=>{r.editorActions.setContent(e,t)}),500),L=e=>(t,r)=>{e(t,r),globalThis.editor=t,globalThis[r]=t},M=e=>(t,r)=>{e(t,r),delete globalThis.editor,delete globalThis[r]},Z=(e,t)=>(e,r)=>{I(e,r,t)},q=k(((e,t)=>()=>{t.editorActions.setContent("","clear")})),F=(e,t)=>(r,o)=>{const{editorActions:a,editorSelectors:n}=t,s=e(r,o);return"swagger-editor"!==o&&n.selectContent()!==r&&a.setContent(r),s},G=({getSystem:e})=>({rootInjects:{useEditorLifecycle:c(e),useElementResize:u},components:{EditorPane:d,EditorPaneBarTop:h,EditorPaneBarRight:f,EditorPaneBarBottom:x,EditorPaneBarLeft:v,Editor:p,TextareaEditor:p},statePlugins:{editor:{actions:{editorSetup:y,editorTearDown:P,setContent:N,setContentDebounced:N,clearContent:R},wrapActions:{editorSetup:L,editorTearDown:M,setContentDebounced:Z,clearContent:q},selectors:{selectContent:z,selectId:D,selectEditor:A},reducers:B},spec:{wrapActions:{updateSpec:F}}}});var H=n.Z;export{H as default};
//# sourceMappingURL=index.js.map