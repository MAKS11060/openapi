{"version":3,"file":"plugins/dropzone/index.js","mappings":"gGACA,IAAIA,EAAsB,CCA1BA,EAAwB,CAACC,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXF,EAAoBI,EAAEF,EAAYC,KAASH,EAAoBI,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDH,EAAwB,CAACS,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,I,sBCElF,MAAM,EAFEI,KAAO,IAAIC,EAAI,CAAC,EAAgC,OAA7Bf,EAAoBgB,EAAED,EAAGD,GAAWC,CAAC,EAE3BA,CAAE,CAAE,YAAiB,IAAME,EAAkCC,YAAa,SAAc,IAAMD,EAAkCE,WCArK,MAAM,EAFEL,KAAO,IAAIC,EAAI,CAAC,EAAgC,OAA7Bf,EAAoBgB,EAAED,EAAGD,GAAWC,CAAC,EAE3B,CAAE,CAAE,IAAS,IAAMK,EAA0DC,IAAK,KAAU,IAAMD,EAA0DE,OC4CjM,EA1CiBC,EAAGC,eAAcC,cAAaC,eAC7C,MAAMC,EAAcH,EAAa,eAAe,IAE9CI,EACAC,EACAC,EACAC,EACAC,EACAC,GACER,IAMJ,OACES,EAAAA,EAAAA,MAAA,OAAKC,UAAU,cAAeH,IAAcN,SAAA,EAC1CU,EAAAA,EAAAA,KAACT,EAAW,CACVU,OAAQR,EACRS,MAAM,+BACNC,QATyBC,KAC7BV,GAAqB,EAAM,EAQSJ,SAE/BK,KAEHK,EAAAA,EAAAA,KAAA,SAAO,UAAQ,cAAeH,MAC7BL,GACCQ,EAAAA,EAAAA,KAAA,OAAKD,UAAU,oBAAmBT,SAAC,4FAInCA,IAEE,EClCV,MAAM,EAFEZ,KAAO,IAAIC,EAAI,CAAC,EAAgC,OAA7Bf,EAAoBgB,EAAED,EAAGD,GAAWC,CAAC,EAE3B,CAAE,CAAE,YAAiB,IAAM0B,EAAoDhB,cCEvGiB,EAAmBC,GAAc,KAC5C,MAAM,cAAEC,GAAkBD,KACnBd,EAAmBC,IAAwBX,EAAAA,EAAAA,WAAS,IACpDY,EAAcc,IAAmB1B,EAAAA,EAAAA,UAAS,IAE3C2B,GAAiB5B,EAAAA,EAAAA,cACrB6B,MAAOC,EAAeC,KACpB,MAAMC,EAAwBD,GAAiBA,EAAcE,OAAS,EAChEC,EAAgCJ,GAA0C,IAAzBA,EAAcG,OAErE,IACE,GAAID,IAA0BE,EAA+B,CAE3DP,EAD4B,2FAE5Bf,GAAqB,EACvB,KAAO,CACL,MAAMuB,EAAOL,EAAc,GACrBM,QAAgBD,EAAKE,OAE3BX,EAAcY,WAAWF,EAAS,YACpC,CACF,CAAE,MAAOG,GAEPZ,EADgC,4FAEhCf,GAAqB,EACvB,IAEF,CAACc,EAAeC,EAAiBf,KAE7B,aAAEE,EAAY,cAAEC,EAAa,aAAEL,IAAiB8B,EAAAA,EAAAA,aAAkB,CACtEC,OAAQb,EACRc,UAAU,EACVC,SAAS,IAGX,MAAO,CACLjC,EACAC,EACAC,EACAC,EACAC,EACAC,EACD,EClCH,EATuB6B,EAAGnB,gBAAW,CACnCoB,YAAa,CACXtC,YAAaiB,EAAgBC,IAE/BqB,WAAY,CACVzC,SACF,K","sources":["../webpack/bootstrap","../webpack/runtime/define property getters","../webpack/runtime/hasOwnProperty shorthand","../external module \"react\"","../external module \"react/jsx-runtime.js\"","plugins/dropzone/components/Dropzone.jsx","../external module \"react-dropzone\"","plugins/dropzone/hooks.js","plugins/dropzone/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var x = y => { var x = {}; __webpack_require__.d(x, y); return x; }\nvar y = x => () => x\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"useCallback\"]: () => __WEBPACK_EXTERNAL_MODULE_react__.useCallback, [\"useState\"]: () => __WEBPACK_EXTERNAL_MODULE_react__.useState });","var x = y => { var x = {}; __webpack_require__.d(x, y); return x; }\nvar y = x => () => x\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"jsx\"]: () => __WEBPACK_EXTERNAL_MODULE_react_jsx_runtime_js_fc12ce1a__.jsx, [\"jsxs\"]: () => __WEBPACK_EXTERNAL_MODULE_react_jsx_runtime_js_fc12ce1a__.jsxs });","/* eslint-disable react/jsx-props-no-spreading */\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Dropzone = ({ getComponent, useDropzone, children }) => {\n  const AlertDialog = getComponent('AlertDialog', true);\n  const [\n    isDragActive,\n    isAlertDialogOpen,\n    setIsAlertDialogOpen,\n    errorMessage,\n    getRootProps,\n    getInputProps,\n  ] = useDropzone();\n\n  const handleAlertDialogClose = () => {\n    setIsAlertDialogOpen(false);\n  };\n\n  return (\n    <div className=\"dropzone\" {...getRootProps()}>\n      <AlertDialog\n        isOpen={isAlertDialogOpen}\n        title=\"Uh oh, an error has occurred\"\n        onClose={handleAlertDialogClose}\n      >\n        {errorMessage}\n      </AlertDialog>\n      <input data-cy=\"dropzone\" {...getInputProps()} />\n      {isDragActive ? (\n        <div className=\"dropzone__overlay\">\n          Please drop an OpenAPI 2.0/3.0/3.1 or AsyncApi 2.x definition in .yaml or .json format.\n        </div>\n      ) : (\n        children\n      )}\n    </div>\n  );\n};\n\nDropzone.propTypes = {\n  getComponent: PropTypes.func.isRequired,\n  useDropzone: PropTypes.func.isRequired,\n  children: PropTypes.node.isRequired,\n};\n\nexport default Dropzone;\n","var x = y => { var x = {}; __webpack_require__.d(x, y); return x; }\nvar y = x => () => x\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"useDropzone\"]: () => __WEBPACK_EXTERNAL_MODULE_react_dropzone_68d11630__.useDropzone });","import { useCallback, useState } from 'react';\nimport { useDropzone as useVendorDropzone } from 'react-dropzone';\n\n// eslint-disable-next-line import/prefer-default-export\nexport const makeUseDropzone = (getSystem) => () => {\n  const { editorActions } = getSystem();\n  const [isAlertDialogOpen, setIsAlertDialogOpen] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n\n  const handleFileDrop = useCallback(\n    async (acceptedFiles, rejectedFiles) => {\n      const someFilesWereRejected = rejectedFiles && rejectedFiles.length > 0;\n      const thereIsExactlyOneAcceptedFile = acceptedFiles && acceptedFiles.length === 1;\n\n      try {\n        if (someFilesWereRejected || !thereIsExactlyOneAcceptedFile) {\n          const dropFileErrMessage = `Sorry, there was an error processing your file.\\nPlease drag and drop exactly one file.`;\n          setErrorMessage(dropFileErrMessage);\n          setIsAlertDialogOpen(true);\n        } else {\n          const file = acceptedFiles[0];\n          const content = await file.text();\n\n          editorActions.setContent(content, 'file-drop');\n        }\n      } catch (error) {\n        const importedFileErrMessage = `Sorry, there was an error processing your file. Unable to process as valid YAML or JSON `;\n        setErrorMessage(importedFileErrMessage);\n        setIsAlertDialogOpen(true);\n      }\n    },\n    [editorActions, setErrorMessage, setIsAlertDialogOpen]\n  );\n  const { getRootProps, getInputProps, isDragActive } = useVendorDropzone({\n    onDrop: handleFileDrop,\n    multiple: false,\n    noClick: true,\n  });\n\n  return [\n    isDragActive,\n    isAlertDialogOpen,\n    setIsAlertDialogOpen,\n    errorMessage,\n    getRootProps,\n    getInputProps,\n  ];\n};\n","import Dropzone from './components/Dropzone.jsx';\nimport { makeUseDropzone } from './hooks.js';\n\nconst DropzonePlugin = ({ getSystem }) => ({\n  rootInjects: {\n    useDropzone: makeUseDropzone(getSystem),\n  },\n  components: {\n    Dropzone,\n  },\n});\n\nexport default DropzonePlugin;\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","y","x","d","__WEBPACK_EXTERNAL_MODULE_react__","useCallback","useState","__WEBPACK_EXTERNAL_MODULE_react_jsx_runtime_js_fc12ce1a__","jsx","jsxs","Dropzone","getComponent","useDropzone","children","AlertDialog","isDragActive","isAlertDialogOpen","setIsAlertDialogOpen","errorMessage","getRootProps","getInputProps","_jsxs","className","_jsx","isOpen","title","onClose","handleAlertDialogClose","__WEBPACK_EXTERNAL_MODULE_react_dropzone_68d11630__","makeUseDropzone","getSystem","editorActions","setErrorMessage","handleFileDrop","async","acceptedFiles","rejectedFiles","someFilesWereRejected","length","thereIsExactlyOneAcceptedFile","file","content","text","setContent","error","useVendorDropzone","onDrop","multiple","noClick","DropzonePlugin","rootInjects","components"],"sourceRoot":""}