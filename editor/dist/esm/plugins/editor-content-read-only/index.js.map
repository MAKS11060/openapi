{"version":3,"file":"plugins/editor-content-read-only/index.js","mappings":"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","sources":["../webpack/bootstrap","../webpack/runtime/define property getters","../webpack/runtime/hasOwnProperty shorthand","plugins/editor-content-read-only/actions.js","plugins/editor-content-read-only/reducers.js","plugins/editor-content-read-only/selectors.js","../external module \"react\"","../external module \"@primer/octicons-react\"","../external module \"react/jsx-runtime.js\"","plugins/editor-content-read-only/components/ReadOnlySelectionIcon.jsx","plugins/editor-content-read-only/wrap-components/EditorPaneBarTopWrapper.jsx","plugins/editor-content-read-only/wrap-components/EditorWrapper.jsx","plugins/editor-content-read-only/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","/**\n * Action types.\n */\nexport const EDITOR_CONTENT_SET_READ_ONLY = 'editor_update_read_only';\nexport const EDITOR_CONTENT_SET_READ_WRITE = 'editor_update_read_write';\n\n/**\n * Action creators.\n */\nexport const setContentReadOnly = () => ({\n  type: EDITOR_CONTENT_SET_READ_ONLY,\n});\n\nexport const setContentReadWrite = () => ({\n  type: EDITOR_CONTENT_SET_READ_WRITE,\n});\n","import { EDITOR_CONTENT_SET_READ_ONLY, EDITOR_CONTENT_SET_READ_WRITE } from './actions.js';\n\nconst reducers = {\n  [EDITOR_CONTENT_SET_READ_ONLY]: (state) => {\n    return state.set('contentIsReadOnly', true);\n  },\n  [EDITOR_CONTENT_SET_READ_WRITE]: (state) => {\n    return state.set('contentIsReadOnly', false);\n  },\n};\n\nexport default reducers;\n","export const selectContentIsReadOnly = (state) => state.get('contentIsReadOnly') || false;\n\nexport const selectContentIsReadWrite = (state) => !selectContentIsReadOnly(state);\n","var x = y => { var x = {}; __webpack_require__.d(x, y); return x; }\nvar y = x => () => x\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"useEffect\"]: () => __WEBPACK_EXTERNAL_MODULE_react__.useEffect });","var x = y => { var x = {}; __webpack_require__.d(x, y); return x; }\nvar y = x => () => x\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"LockIcon\"]: () => __WEBPACK_EXTERNAL_MODULE__primer_octicons_react_9fe6ea35__.LockIcon, [\"UnlockIcon\"]: () => __WEBPACK_EXTERNAL_MODULE__primer_octicons_react_9fe6ea35__.UnlockIcon });","var x = y => { var x = {}; __webpack_require__.d(x, y); return x; }\nvar y = x => () => x\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"Fragment\"]: () => __WEBPACK_EXTERNAL_MODULE_react_jsx_runtime_js_fc12ce1a__.Fragment, [\"jsx\"]: () => __WEBPACK_EXTERNAL_MODULE_react_jsx_runtime_js_fc12ce1a__.jsx, [\"jsxs\"]: () => __WEBPACK_EXTERNAL_MODULE_react_jsx_runtime_js_fc12ce1a__.jsxs });","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { LockIcon, UnlockIcon } from '@primer/octicons-react';\n\nconst ReadOnlySelectionIcon = ({ editorSelectors, editorActions }) => {\n  const isReadWrite = editorSelectors.selectContentIsReadWrite();\n  const handleReadonly = (isReadOnlyNew) => () => {\n    if (isReadOnlyNew) {\n      editorActions.setContentReadOnly();\n    } else {\n      editorActions.setContentReadWrite();\n    }\n  };\n\n  return isReadWrite ? (\n    <div className=\"swagger-editor__generic-padding-thin-top-bottom\">\n      <button\n        type=\"button\"\n        className=\"swagger-editor__editor-pane-bar-control\"\n        onClick={handleReadonly(true)}\n      >\n        <UnlockIcon size=\"small\" aria-label=\"Unlock\" />\n      </button>\n    </div>\n  ) : (\n    <div className=\"swagger-editor__generic-padding-thin-top-bottom\">\n      <button\n        type=\"button\"\n        className=\"swagger-editor__editor-pane-bar-control\"\n        onClick={handleReadonly(false)}\n      >\n        <LockIcon size=\"small\" aria-label=\"Lock\" />\n      </button>\n    </div>\n  );\n};\n\nReadOnlySelectionIcon.propTypes = {\n  editorActions: PropTypes.shape({\n    setContentReadOnly: PropTypes.func.isRequired,\n    setContentReadWrite: PropTypes.func.isRequired,\n  }).isRequired,\n  editorSelectors: PropTypes.shape({\n    selectContentIsReadWrite: PropTypes.func.isRequired,\n  }).isRequired,\n};\n\nexport default ReadOnlySelectionIcon;\n","import PropTypes from 'prop-types';\n/* eslint-disable react/jsx-props-no-spreading */\n\nconst EditorPaneBarTopWrapper = (Original, system) => {\n  const ReadOnlySelection = system.getComponent('ReadOnlySelection', true);\n  const EditorPaneBarTop = ({ renderControls, ...rest }) => {\n    return (\n      <Original\n        {...rest}\n        renderControls={(controls) =>\n          renderControls(\n            <>\n              <ReadOnlySelection />\n              {controls}\n            </>\n          )\n        }\n      />\n    );\n  };\n  EditorPaneBarTop.propTypes = {\n    renderControls: PropTypes.func,\n  };\n  EditorPaneBarTop.defaultProps = {\n    renderControls: (controls) => controls,\n  };\n\n  return EditorPaneBarTop;\n};\n\nexport default EditorPaneBarTopWrapper;\n","import { useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nconst EditorWrapper = (Original, system) => {\n  /**\n   * `isReadOnly` prop has always priority over the state.\n   * If `isReadOnly` prop is set, it will override the state.\n   */\n  const Editor = ({ isReadOnly: isReadOnlyFromProp, ...props }) => {\n    const isReadOnlyFromState = system.editorSelectors.selectContentIsReadOnly();\n    const isReadOnly = isReadOnlyFromProp ?? isReadOnlyFromState;\n\n    useEffect(() => {\n      if (typeof isReadOnlyFromProp === 'boolean' && isReadOnlyFromProp !== isReadOnlyFromState) {\n        if (isReadOnlyFromProp) system.editorActions.setContentReadOnly();\n        if (!isReadOnlyFromProp) system.editorActions.setContentReadWrite();\n      }\n    }, [isReadOnlyFromProp, isReadOnlyFromState]);\n\n    // eslint-disable-next-line react/jsx-props-no-spreading\n    return <Original {...props} isReadOnly={isReadOnly} />;\n  };\n\n  Editor.propTypes = {\n    isReadOnly: PropTypes.bool,\n  };\n  Editor.defaultProps = {\n    isReadOnly: null,\n  };\n\n  return Editor;\n};\n\nexport default EditorWrapper;\n","import reducers from './reducers.js';\nimport { setContentReadOnly, setContentReadWrite } from './actions.js';\nimport { selectContentIsReadOnly, selectContentIsReadWrite } from './selectors.js';\nimport ReadOnlySelectionIcon from './components/ReadOnlySelectionIcon.jsx';\nimport EditorPaneBarTopWrapper from './wrap-components/EditorPaneBarTopWrapper.jsx';\nimport EditorWrapper from './wrap-components/EditorWrapper.jsx';\n\nconst EditorContentReadOnlyPlugin = () => {\n  return {\n    components: {\n      ReadOnlySelection: ReadOnlySelectionIcon,\n    },\n    wrapComponents: {\n      Editor: EditorWrapper,\n      EditorPaneBarTop: EditorPaneBarTopWrapper,\n    },\n    statePlugins: {\n      editor: {\n        reducers,\n        selectors: {\n          selectContentIsReadOnly,\n          selectContentIsReadWrite,\n        },\n        actions: {\n          setContentReadOnly,\n          setContentReadWrite,\n        },\n      },\n    },\n  };\n};\n\nexport default EditorContentReadOnlyPlugin;\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","EDITOR_CONTENT_SET_READ_ONLY","EDITOR_CONTENT_SET_READ_WRITE","setContentReadOnly","type","setContentReadWrite","state","set","selectContentIsReadOnly","selectContentIsReadWrite","y","x","d","__WEBPACK_EXTERNAL_MODULE_react__","useEffect","__WEBPACK_EXTERNAL_MODULE__primer_octicons_react_9fe6ea35__","LockIcon","UnlockIcon","__WEBPACK_EXTERNAL_MODULE_react_jsx_runtime_js_fc12ce1a__","Fragment","jsx","jsxs","ReadOnlySelectionIcon","editorSelectors","editorActions","handleReadonly","isReadOnlyNew","_jsx","className","children","onClick","size","EditorPaneBarTopWrapper","Original","system","ReadOnlySelection","getComponent","EditorPaneBarTop","renderControls","rest","controls","_jsxs","_Fragment","defaultProps","EditorWrapper","Editor","isReadOnly","isReadOnlyFromProp","props","isReadOnlyFromState","EditorContentReadOnlyPlugin","components","wrapComponents","statePlugins","editor","reducers","selectors","actions"],"sourceRoot":""}